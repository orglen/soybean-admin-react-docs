---
title: å¸¸è§é—®é¢˜
---

> [!NOTE]
>
> è¿™é‡Œåˆ—ä¸¾äº†ä¸€äº›å¸¸è§çš„é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯ä»¥åœ¨ [github issue](https://github.com/mufeng889/react-soybean-admin/issues) åé¦ˆã€‚

## å‰è¨€

é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹çš„è§£å†³æ–¹æ¡ˆ

- è¯·å…ˆæ‰¾å‡ºå…³é”®æ€§çš„é”™è¯¯ä¿¡æ¯ä»¥åŠå¿…è¦é—®é¢˜ä¸Šä¸‹æ–‡
- å°è¯•ä½¿ç”¨æœç´¢å¼•æ“ã€æŠ€æœ¯ç½‘ç«™ã€AI å·¥å…·ç­‰æœç´¢é”™è¯¯çš„å…³é”®è¯

| [Google](https://google.com) | [Bing](https://www.bing.com/) | ChatGPT | [StackoverFlow](https://stackoverflow.com/) |
| ---------------------------- | ----------------------------- | -------- | ------------------------------------------- |

- è‹¥æ˜¯é”™è¯¯ä¸ºä¾èµ–åŒ…çš„é—®é¢˜ï¼Œè¯·å°è¯•å»ä¾èµ–åŒ…çš„ Github çš„ Issues ä¸­æœç´¢
- å°è¯•è¯·æ•™è®¤è¯†çš„æœ‹å‹æˆ–æŠ€æœ¯å¤§ä½¬
- åœ¨SoybeanAdminå®˜æ–¹äº¤æµç¾¤é‡Œé¢æé—®ï¼Œè¯·å°½é‡æè¿°æ¸…æ¥šé—®é¢˜ï¼Œä»¥ä¾¿å¤§å®¶æ›´å¥½çš„å¸®åŠ©ä½ ï¼Œå¯ä»¥å‚è€ƒ [æé—®çš„æ™ºæ…§](https://github.com/tvvocold/How-To-Ask-Questions-The-Smart-Way)

## SoybeanAdmin ç¼“å­˜æ–¹é¢çš„é—®é¢˜

**é—®é¢˜èƒŒæ™¯**

SoybeanAdmin çš„é¡¹ç›®é…ç½®é»˜è®¤æ˜¯ Â `localStorage` , åˆå§‹åŒ–æ—¶å¯¹é¡¹ç›®çš„ä¸»é¢˜æ¶‰åŠçš„æ•°æ®è¿›è¡ŒæŒä¹…åŒ–

é¡¹ç›®çš„ç¼“å­˜åˆ†ä¸ºä¸¤æ–¹é¢

- LocalStorage
- SessionStorage

**ç¼“å­˜è¦ç‚¹**

1. å¯¹äºæœ¬æ¡†æ¶ç¼“å­˜æ–¹é¢çš„ä½¿ç”¨ä¸»è¦é›†ä¸­åœ¨ä¸‹åˆ—å‡ ä¸ªæ–¹æ³•ä¸­ï¼š
   - setï¼šé€šè¿‡ç»™æ–¹æ³•ä¼ é€’å¿…å¡«å‚æ•° `key` ã€`value` å’Œå¯é€‰å‚æ•° `expire` å¯¹æ•°æ®è¿›è¡Œç¼“å­˜
   - getï¼šé€šè¿‡ç»™æ–¹æ³•ä¼ é€’å¿…å¡«å‚æ•° `key` è·å–ç¼“å­˜çš„æ•°æ®
   - removeï¼šé€šè¿‡ç»™æ–¹æ³•ä¼ é€’å¿…å¡«å‚æ•° `key` ç§»é™¤æŒ‡å®šçš„ç¼“å­˜æ•°æ®
   - clearï¼šé€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæ¸…é™¤å½“å‰æ‰€æœ‰çš„ `Storage` ç›¸å…³çš„ç¼“å­˜æ•°æ®
2. ç¼“å­˜çš„æ•°æ®ç±»å‹éœ€è¦é¢„å…ˆåœ¨ src/typings/storage.d.ts é‡Œé¢å®šä¹‰å¥½

## å…³äºä¿®æ”¹æ–‡ä»¶ç›¸å…³çš„é—®é¢˜

1. å½“ä¿®æ”¹ Â `.env`Â  ç­‰ç¯å¢ƒæ–‡ä»¶åŠ Â `vite.config.ts`Â  æ–‡ä»¶æ—¶ï¼Œvite ä¼šè‡ªåŠ¨é‡å¯æœåŠ¡ã€‚

> ä½†æ˜¯è‡ªåŠ¨é‡å¯æœ‰å‡ ç‡å‡ºç°é—®é¢˜ï¼Œè¯·é‡æ–°è¿è¡Œé¡¹ç›®å³å¯è§£å†³ã€‚

2. å½“ä¿®æ”¹ `.tsx` æˆ–è€… `.ts` æ—¶ï¼Œ vite è¿›è¡Œçƒ­éƒ¨ç½²æ—¶æœ‰å‡ ç‡é€ æˆé¡µé¢å¡é¡¿å¯¼è‡´æ— æ³•çœ‹åˆ°

> å®æ—¶ä¿®æ”¹çš„æ•ˆæœï¼Œ`F5` åˆ·æ–°å³å¯è§£å†³

## å‰ç«¯é™æ€è·¯ç”±æ·»åŠ èœå•åæ²¡æ˜¾ç¤º

ğŸ“¢ æœ‰çƒ­å¿ƒç¾¤å‹åé¦ˆï¼šåˆšæ¥è§¦é¡¹ç›®æ—¶ï¼Œå…ˆæ·»åŠ ç»„ä»¶å†æ·»åŠ é™æ€è·¯ç”±ï¼Œä½†æ˜¯é¡µé¢ä¸Šæ— æ³•æ¸²æŸ“èœå•å’Œé¡µé¢ï¼Œé¡¹ç›®ä¸æŠ¥é”™

é—®é¢˜èƒŒæ™¯

é¡¹ç›®åˆå§‹åŒ–è·¯ç”±æ—¶ï¼Œè¯¥åŒå­¦çš„é¡¶çº§è·¯ç”±æ•°æ® meta ä¸­å«æœ‰ `hideInMenu` å±æ€§ä¸º true

æ‰€ä»¥èœå•å’Œé¡µé¢éƒ½æ— æ³•æ˜¾ç¤ºå‡ºæ¥

> [!NOTE]
>
> ç»„ä»¶ä½ç½®ï¼šsrc/typings/router.d.ts

è·³è½¬æŸ¥çœ‹ [`RouteMeta`](../guide/router/intro.md#é…ç½®å±æ€§)

**è§£å†³æ–¹æ¡ˆ:**

å»é™¤ `hideInMenu` å±æ€§å³å¯æ­£å¸¸æ˜¾ç¤ºèœå•å’Œé¡µé¢

## é¡¹ç›®ä¸­çš„æƒé™è·¯ç”±æ¨¡å¼å¦‚ä½•ç†è§£ï¼Œç›¸åº”çš„æ¸²æŸ“è·¯ç”±çš„æ•°æ®æ ¼å¼æ€ä¹ˆå®šä¹‰

**é—®é¢˜èƒŒæ™¯**

é¡¹ç›®ä¸­çš„æƒé™è·¯ç”±æ¨¡å¼åˆ†ä¸ºï¼š

- é™æ€è·¯ç”±

  é™æ€è·¯ç”±æŒ‡çš„æ˜¯å‰ç«¯é¡¹ç›®ï¼š`src/router/routes.ts` ä¸­çš„è·¯ç”±æ•°æ®
  é¡¹ç›®èƒ½å¤Ÿæ ¹æ®åœ¨è¿™ä¸ªè·¯å¾„ä¸‹å®šä¹‰è¿›è¡Œè·¯ç”±æ•°æ®çš„è§£æï¼Œå¹¶è‡ªåŠ¨æ¸²æŸ“å‡ºèœå•ä¿¡æ¯

- åŠ¨æ€è·¯ç”±

  åŠ¨æ€è·¯ç”±æŒ‡çš„æ˜¯åå°é¡¹ç›®ä¼ é€’è¿‡æ¥çš„è·¯ç”±æ•°æ®

> é¡¹ç›®ä½¿ç”¨åŠ¨æ€è·¯ç”±æ¨¡å¼è¿›è¡Œæ•°æ®æ¸²æŸ“æ—¶ï¼Œä¼šè‡ªåŠ¨è¦†ç›–è·¯ç”±é¦–é¡µçš„ name å€¼


## ç»„ä»¶å‘½åé—®é¢˜

> ğŸ“¢ æœ‰çƒ­å¿ƒç¾¤å‹åé¦ˆï¼šä¸ºäº†å»¶ç»­é¡¹ç›®é«˜è´¨é‡ä»£ç çš„é£æ ¼ï¼Œæƒ³å­¦ä¹ ä¸€ç§ç›¸å¯¹ç§‘å­¦çš„å‘½åæ–¹å¼ï¼Œä½†è‹¦äºæ²¡æœ‰å…·ä½“çš„æ ¼å¼è§„èŒƒ

**å‘½åè§„èŒƒ**

- æ–‡ä»¶å‘½å: ç»Ÿä¸€ç”¨å°å†™å­—æ¯å‘½åï¼Œå¤šä¸ªå•è¯ç”¨ä¸­åˆ’çº¿è¿æ¥

```
pages
â”œâ”€â”€ home
â”œâ”€â”€ demo-page
```

- æ„é€ å‡½æ•°ã€class ç±»ã€TS ç±»å‹å‘½åï¼šç»Ÿä¸€ç”¨ PascalCase æ³•å‘½åï¼Œå¤šä¸ªå•è¯é¦–å­—æ¯å¤§å†™

```ts copy
function Person() {}

class Person {}

type Person = {
  name: string;
};

interface Person {
  name: string;
}
```

- å˜é‡ã€æ™®é€šå‡½æ•°å‘½åï¼šç»Ÿä¸€ç”¨ camelCase æ³•å‘½åï¼Œå¤šä¸ªå•è¯é¦–å­—æ¯å°å†™

```ts copy
let num: number = 1;

function getNum() {}
```

- å¸¸é‡å‘½åï¼šç»Ÿä¸€ç”¨å¤§å†™å­—æ¯å‘½åï¼Œå¤šä¸ªå•è¯ç”¨ä¸‹åˆ’çº¿è¿æ¥

```ts copy
const MAX_COUNT = 10;
```

- æ ·å¼çš„å‘½åï¼šç»Ÿä¸€ç”¨å°å†™å­—æ¯å‘½åï¼Œå¤šä¸ªå•è¯ç”¨ä¸­åˆ’çº¿è¿æ¥

```css copy
.container {
}

.container-item {
}
```

## ç¯å¢ƒé—®é¢˜

> å¦‚æœå‡ºç°ä¾èµ–å®‰è£…æŠ¥é”™ï¼Œå¯åŠ¨æŠ¥é”™ç­‰ã€‚å…ˆæ£€æŸ¥ç”µè„‘ç¯å¢ƒæœ‰æ²¡æœ‰å®‰è£…é½å…¨ã€‚

æœ¬åœ°ç¯å¢ƒéœ€è¦å…·å¤‡

- [Git](https://git-scm.com/)

- **NodeJS**: >=18.0.0ï¼Œæ¨è 18.19.0 æˆ–æ›´é«˜ã€‚
  > ä½ å¯ä»¥ä½¿ç”¨ [volta](https://volta.sh/) æˆ– [fnm](https://github.com/Schniz/fnm) æ¥ç®¡ç†ä½ çš„NodeJSç‰ˆæœ¬ã€‚
- **pnpm**: >= 8.0.0ï¼Œæ¨èæœ€æ–°ç‰ˆæœ¬ã€‚

## ä¾èµ–å®‰è£…é—®é¢˜

- æ£€æŸ¥ç½‘ç»œé—®é¢˜

- æ£€æŸ¥é•œåƒæºé—®é¢˜

- æ£€æŸ¥ä¾èµ–åŒ…ç‰ˆæœ¬é—®é¢˜

**é•œåƒé…ç½®**

> é¡¹ç›®é»˜è®¤é•œåƒé…ç½®æ–‡ä»¶ .npmrc çš„é…ç½®é¡¹è¯´æ˜

ğŸ¯ æ–‡ä»¶ä½ç½®ï¼š`.npmrc`

```ts copy
registry=https://registry.npmmirror.com/
shamefully-hoist=true
ignore-workspace-root-check=true
```

- `registry`ï¼šæŒ‡å®šäº† npm åŒ…çš„é•œåƒæºï¼Œæœ¬é¡¹ç›®ä¸­ä½¿ç”¨çš„é•œåƒæºæ˜¯æ·˜å®çš„æœ€æ–°é•œåƒã€‚
- `shamefully-hoist`ï¼šè¯¥é€‰é¡¹ç”¨äºå°†ä¾èµ–é¡¹ hoist åˆ°å°½å¯èƒ½é«˜çš„èŠ‚ç‚¹ä¸Šï¼Œæé«˜ä¾èµ–é¡¹çš„å…±ç”¨
- `ignore-workspace-root-check`ï¼šåœ¨è·Ÿè·¯å¾„å®‰è£…ä¾èµ–æ—¶ï¼Œå¿½ç•¥å·¥ä½œåŒºæ ¹æ£€æŸ¥ï¼Œå³ä¸ç”¨åŠ ä¸Š `-w` å‚æ•°

> å®Œæ•´ä»£ç æŒ‡è·¯ [SoybeanAdminğŸ”œ](https://github.com/soybeanjs/soybean-admin/blob/main/.npmrc)

## ä»£ç å¦‚ä½•ä¿æŒæœ€æ–°

å¦‚æœä½ ä½¿ç”¨äº†è¯¥é¡¹ç›®è¿›è¡Œé¡¹ç›®å¼€å‘ã€‚å¼€å‘ä¹‹ä¸­æƒ³åŒæ­¥æœ€æ–°çš„ä»£ç ã€‚ä½ å¯ä»¥è®¾ç½®å¤šä¸ªæºçš„æ–¹å¼

- å…‹éš†ä»£ç 

```bash copy
git clone https://github.com/soybeanjs/soybean-admin.git
```

- æ·»åŠ è‡ªå·±çš„ git æºåœ°å€

```bash copy
# up ä¸ºæºåç§°,å¯ä»¥éšæ„è®¾ç½®
# gitUrlä¸ºå¼€æºæœ€æ–°ä»£ç 
git remote add up gitUrl;
```

3.  æäº¤ä»£ç åˆ°è‡ªå·±çš„ git

```bash copy
# æäº¤ä»£ç åˆ°è‡ªå·±çš„ git ä»“åº“
# mainä¸ºåˆ†æ”¯å éœ€è¦è‡ªè¡Œæ ¹æ®æƒ…å†µä¿®æ”¹
git push up main

# åŒæ­¥è‡ªå·±çš„ä»£ç 
# mainä¸ºåˆ†æ”¯å éœ€è¦è‡ªè¡Œæ ¹æ®æƒ…å†µä¿®æ”¹
git pull up main
```

4.  å¦‚ä½•åŒæ­¥å¼€æºæœ€æ–°ä»£ç 

```bash copy
git pull origin main
```

> ä½¿ç”¨ Git è¿›è¡Œä»£ç ç®¡ç†çš„æ—¶å€™ï¼Œå…ˆæ›´æ–°ï¼Œé‡åˆ°å†²çªå…ˆè§£å†³ï¼Œç„¶åå†åˆå¹¶

## ä¸ºä»€ä¹ˆæ˜¯ dayjs

Day.js æ˜¯ä¸€ä¸ªæç®€çš„ JavaScript åº“ï¼Œå¯ä»¥ä¸ºç°ä»£æµè§ˆå™¨è§£æã€éªŒè¯ã€æ“ä½œå’Œæ˜¾ç¤ºæ—¥æœŸå’Œæ—¶é—´ã€‚

**ä¸ºä»€ä¹ˆä½¿ç”¨ Day.jsï¼Ÿ**

æ–‡ä»¶å¤§å°åªæœ‰ 2KB å·¦å³ï¼Œä¸‹è½½ã€è§£æå’Œæ‰§è¡Œçš„ JavaScript æ›´å°‘ï¼Œä¸ºä»£ç ç•™ä¸‹æ›´å¤šçš„æ—¶é—´ã€‚

**æ²™ç®±æœºåˆ¶**

æ‰€æœ‰æ›´æ”¹ Day.js å¯¹è±¡çš„ API æ“ä½œéƒ½å°†è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢é”™è¯¯å’Œé¿å…é•¿æ—¶é—´çš„è°ƒè¯•ä¼šè¯ã€‚

**å›½é™…åŒ–**

Day.js å¯¹å›½é™…åŒ–æœ‰å¾ˆå¤§çš„æ”¯æŒã€‚ä½†æ˜¯ï¼Œé™¤éæ‚¨ä½¿ç”¨å®ƒä»¬ï¼Œå¦åˆ™å®ƒä»¬éƒ½ä¸ä¼šåŒ…å«åœ¨æ‚¨çš„æ„å»ºä¸­ã€‚

## è·¨åŸŸé—®é¢˜

### æ¦‚å¿µ

è·¨åŸŸï¼ˆCross-Originï¼‰æŒ‡çš„æ˜¯åœ¨æµè§ˆå™¨ä¸­ï¼Œå½“å‰ç½‘é¡µä»ä¸€ä¸ªä¸åŒçš„åŸŸåã€ç«¯å£æˆ–åè®®è¯·æ±‚èµ„æºï¼Œå¯¼è‡´å®‰å…¨ç­–ç•¥é™åˆ¶ï¼Œä»è€Œå‡ºç°è·¨åŸŸé—®é¢˜ã€‚

**è·¨åŸŸçš„å½¢æˆåŸå› **

- åŒæºç­–ç•¥ï¼šæµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥é™åˆ¶äº†é¡µé¢åªèƒ½è¯·æ±‚åŒä¸€åŸŸåä¸‹çš„èµ„æºï¼Œå…¶ä»–åŸŸåä¸‹çš„èµ„æºä¸èƒ½è®¿é—®ã€‚
- åŸŸåä¸åŒï¼šè¯·æ±‚çš„èµ„æºåœ¨ä¸åŒçš„åŸŸåä¸‹ï¼Œä¾‹å¦‚ Â [http://www.aaa.com]Â  å’Œ Â [http://www.bbb.com]
- ç«¯å£ä¸åŒï¼šè¯·æ±‚çš„èµ„æºåœ¨åŒä¸€åŸŸåä¸‹ï¼Œä½†ç«¯å£ä¸åŒï¼Œä¾‹å¦‚ Â [http://www.xxx.com]Â  å’Œ Â [http://www.xxx.com:8080]
- åè®®ä¸åŒï¼šè¯·æ±‚çš„èµ„æºåœ¨åŒä¸€åŸŸåä¸‹ï¼Œä½†åè®®ä¸åŒï¼Œä¾‹å¦‚ Â [http://www.xxx.com]Â  å’Œ Â [https://www.xxx.com]

**æ­£å‘ä»£ç†å’Œåå‘ä»£ç†**

1. æ­£å‘ä»£ç†

_æ­£å‘ä»£ç†å³æ˜¯å®¢æˆ·ç«¯ä»£ç†, ä»£ç†å®¢æˆ·ç«¯, æœåŠ¡ç«¯ä¸çŸ¥é“å®é™…å‘èµ·è¯·æ±‚çš„å®¢æˆ·._

> åœ¨æœ¬é¡¹ç›®ä¸­æŒ‡çš„æ˜¯é€šè¿‡é…ç½® `Vite` å®ç°æ­£å‘ä»£ç†

2. åå‘ä»£ç†

<u>æ­£å‘ä»£ç†å³æ˜¯å®¢æˆ·ç«¯ä»£ç†, ä»£ç†å®¢æˆ·ç«¯, æœåŠ¡ç«¯ä¸çŸ¥é“å®é™…å‘èµ·è¯·æ±‚çš„å®¢æˆ·ç«¯.</u>

> ä¸€èˆ¬æ˜¯å°† dist ç›®å½•éƒ¨ç½²åˆ° `Nginx` æœåŠ¡å™¨åï¼Œé€šè¿‡é…ç½® `nginx.conf` å®ç°åå‘ä»£ç†

### å¸¸è§è§£å†³æ–¹æ¡ˆ

å®é™…çš„å¼€å‘åœºæ™¯å¯èƒ½é‡åˆ°çš„è·¨åŸŸæœ‰ä¸¤ç§æƒ…å†µï¼Œ

**æœ¬åœ°å¼€å‘è·¨åŸŸ**

åœ¨è¿›è¡Œæœ¬åœ°å¼€å‘æ—¶ï¼Œä¸€èˆ¬æ¯”è¾ƒå¸¸è§çš„æ˜¯ä½¿ç”¨ä¸‹é¢ä¸‰ç§æ–¹å¼è¿›è¡Œå¤„ç†ï¼š

1. Vite çš„ Proxy é…ç½®æ­£å‘ä»£ç† ï¼ˆé¡¹ç›®æœ¬åœ°å¼€å‘ç¯å¢ƒä½¿ç”¨çš„æ­¤æ–¹æ¡ˆï¼‰
2. åå°æœåŠ¡å™¨å¼€å¯ CORS
3. å‰ç«¯æœåŠ¡å™¨ Nginx é…ç½®åå‘ä»£ç†

> æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­ï¼Œé»˜è®¤å¼€å¯æœ¬åœ°ä»£ç†

**ç”Ÿäº§ç¯å¢ƒè·¨åŸŸ**

é¡¹ç›®éƒ¨ç½²è‡³ç”Ÿäº§ç¯å¢ƒåï¼Œä¸€èˆ¬ä½¿ç”¨ Nginx è¿›è¡Œè¯·æ±‚è½¬å‘è‡³åå°æœåŠ¡å™¨

- SoybeanAdmin

ğŸ¯ æ–‡ä»¶ä½ç½®ï¼š `./env-config.ts`

```ts copy
# å…³é”®ä»£ç å¦‚ä¸‹æ‰€ç¤º

/** ä¸åŒè¯·æ±‚æœåŠ¡çš„ç¯å¢ƒé…ç½® */

const serviceConfigMap: App.Service.ServiceConfigMap = {
  dev: {
    baseURL: mockURL,
    otherBaseURL: {
      demo: 'http://localhost:9528'
    }
  },
  test: {
    baseURL: mockURL,
    otherBaseURL: {
      demo: 'http://localhost:9529'
    }
  },
  prod: {
    baseURL: mockURL,
    otherBaseURL: {
      demo: 'http://localhost:9530'
    }
  }
};
```

> å®Œæ•´ä»£ç æŒ‡è·¯ [SoybeanAdminğŸ”œ](https://github.com/soybeanjs/soybean-admin/blob/main/env-config.ts)

âš™ Nginx é…ç½®å‚è€ƒ

```java
# nginx.conf

server {
  listen       8080;
  server_name  localhost;

  # æ¥å£ä»£ç†ï¼Œç”¨äºè§£å†³è·¨åŸŸé—®é¢˜
  location /url {
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

    # åå°æ¥å£åœ°å€
    proxy_pass http://xxx.xxx.xx.x:8080/api;

    proxy_redirect default;
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Headers X-Requested-With;
    add_header Access-Control-Allow-Methods GET,POST,OPTIONS;
  }
}

```

å°±å¯ä»¥é€šè¿‡ `http://localhost:8080` è®¿é—®åˆ°è¿™ä¸ªå·²éƒ¨ç½²é¡¹ç›®çš„é¦–é¡µ

> é¡¹ç›®ä¸­é…ç½®ç”Ÿäº§ç¯å¢ƒç«¯å£å¿…é¡»å’Œ `nginx.conf` ä¸­ listen é…ç½®çš„ ç«¯å£å· ä¿æŒä¸€è‡´
>
> å¦‚æœåå°æœåŠ¡å¼€å¯ CROSï¼Œ å‰å°æœåŠ¡åˆ™ä¸éœ€è¦é¢å¤–é…ç½®

## æ¥å£è¯·æ±‚æˆåŠŸï¼Œæ— æ³•è·å–åˆ°å“åº”æ•°æ®

> ğŸ“¢ æœ‰çƒ­å¿ƒç¾¤å‹åé¦ˆï¼šé¡¹ç›®åœ¨æ¥å£æ—¶ï¼Œè¯·æ±‚å‘é€æˆåŠŸ , å¯ä»¥åœ¨è¯·æ±‚çš„å“åº”ä½“ä¸­çœ‹åˆ°æ•°æ®ï¼Œä½†æ˜¯æ— æ³•å°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸­

## vscodeçš„i18nAllyæ’ä»¶æ— æ³•æ–°å¢å¤šè¯­è¨€

å‚è€ƒï¼š[fix(utils): ä¿®å¤windowsç³»ç»Ÿä¸‹ä½¿ç”¨vscodeçš„i18nAllyæ’ä»¶æ— æ³•æ–°å¢å¤šè¯­è¨€çš„é—®é¢˜ #630](https://github.com/soybeanjs/soybean-admin/pull/630)

## é¡¹ç›®ä¸­ä½¿ç”¨ Iframe åµŒå…¥æœ¬åœ°çš„ HTML æ—¶å‡ºç° 404 çš„é—®é¢˜

ğŸ“¢ æœ‰çƒ­å¿ƒç¾¤å‹åé¦ˆï¼šåœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸šåŠ¡éœ€è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Iframe åµŒå…¥æœ¬åœ°çš„ HTML æ–‡ä»¶, ä½†æ˜¯åµŒå…¥åæ— æ³•æ˜¾ç¤ºé¡µé¢å†…å®¹ï¼Œæ˜¾ç¤ºçš„æ˜¯ 404 é¡µé¢

**é—®é¢˜èƒŒæ™¯**

æ•´ä¸ªé¡¹ç›®éƒ½æ˜¯å•é¡µé¢åº”ç”¨ï¼Œæ‰€ä»¥ä»è·¯å¾„é‡Œå»åŠ è½½ä¸åŒçš„ HTML æœ¬èº«å°±ä¸æ”¯æŒï¼Œè¦ä¹ˆåˆ›å»ºå¤šé¡µé¢åº”ç”¨ï¼Œè¦ä¹ˆåœ¨å•é¡µé¢åº”ç”¨é‡Œé€šè¿‡ iframe å»åŠ è½½å…¶å®ƒçš„ HTMLã€‚

**è§£å†³æ–¹æ¡ˆ**

é›†æˆ `vite-plugin-mpa` æ’ä»¶ã€‚

## æ‰“åŒ…ååˆ·æ–°ï¼Œé¡µé¢404

**é—®é¢˜èƒŒæ™¯**

é¡¹ç›®buildä¹‹åï¼š
- å¼€å‘ç¯å¢ƒï¼š ç”¨live serverç­‰æ’ä»¶åœ¨æœ¬åœ°å¯åŠ¨æ‰“åŒ…åçš„index.htmlï¼Œåˆ·æ–°é¡µé¢404
- ç”Ÿäº§ç¯å¢ƒï¼š éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œåˆ·æ–°é¡µé¢404

**é—®é¢˜åŸå› **

ç³»ç»Ÿé»˜è®¤ä½¿ç”¨çš„è·¯ç”±æ¨¡å¼æ˜¯ `history` æ¨¡å¼ï¼Œè€Œ `Nginx` ç­‰webæœåŠ¡å™¨é»˜è®¤æ˜¯åŸºäºé™æ€æ–‡ä»¶çš„ï¼Œåœ¨è¯·æ±‚ `/login` ç­‰åœ°å€çš„æ—¶å€™ï¼Œ`Nginx` ä¼šå»å¯»æ‰¾ `login.html` è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰¾ä¸åˆ°å°±ä¼šæŠ¥404äº†ï¼Œæ‰€ä»¥è¯¥æ¨¡å¼éœ€è¦åç«¯é…åˆå°†æ‰€æœ‰è®¿é—®éƒ½æŒ‡å‘ `index.html`ï¼Œå°†å…·ä½“çš„è·¯ç”±ä¿¡æ¯äº¤ç”± `vue-router` å¤„ç†ã€‚

**è§£å†³æ–¹æ¡ˆ**

å¼€å‘ç¯å¢ƒé¢„è§ˆæ‰“åŒ…äº§ç‰©ï¼š
- ä½¿ç”¨ `pnpm preview` å‘½ä»¤å¯åŠ¨é¢„è§ˆã€‚

ç”Ÿäº§ç¯å¢ƒï¼š
- `Nginx` é…ç½®å‚è€ƒï¼ˆå…¶ä»–webæœåŠ¡å™¨è‡ªè¡Œæœç´¢ï¼‰

```java
# nginx.conf

server {
  listen 80;
  listen [::]:80;
  server_name localhost;

  location / {
    root /usr/share/nginx/html;
    index index.html index.htm;
    try_files $uri $uri/ /index.html; // [!code ++]
  }

  error_page 500 502 503 504 /50x.html;
  location = /50x.html {
    root /usr/share/nginx/html;
  }
}
```

- ä¿®æ”¹è·¯ç”±æ¨¡å¼

å¦‚æœæ— æ³•ä¿®æ”¹webæœåŠ¡å™¨ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹å‰ç«¯è·¯ç”±æ¨¡å¼ä¸º `hash` é¿å…è¯¥é—®é¢˜

> [!NOTE]
>
> ä»£ç ä½ç½®ï¼šsrc/features/router/router.ts

```ts copy
// å…³é”®ä»£ç å¦‚ä¸‹æ‰€ç¤º
import { createHashRouter } from 'react-router-dom';

// ä»£ç ä½ç½® ç¬¬32è¡Œ
const router = createHashRouter(....);
```
